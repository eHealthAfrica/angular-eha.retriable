!function(){"use strict";var a=angular.module("eha.retriable",["eha.login-service"]);a.provider("ehaRetriable",function(){var a;this.setNotice=function(b){a=b},this.$get=["$q","ehaLoginService",function(b,c){var d=c;return a||(a=function(){return!0}),function(c){return function(){function e(){return c.apply(null,i)}function f(){j.resolve.apply(j,arguments)}function g(){j.reject.apply(j,arguments)}function h(c){return 401!==c.status?g(c):b.when(a()).then(d.logout).then(d.maybeShowLoginUi).then(d.renew).then(e).then(f)["catch"](g)}var i=arguments,j=b.defer(),k=d.maybeShowLoginUi().then(e);return k.then(f),k["catch"](function(a){if(401!==a.status)return g(a);var b=d.renew();b["catch"](h),b.then(e).then(f)["catch"](h)}),j.promise}}}]}),"undefined"!=typeof module&&module.exports&&(module.exports=a)}();